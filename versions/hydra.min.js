/*! Hydra.js v3.9.1 | Date:2014-02-04 | License: https://raw.github.com/tcorral/Hydra.js/master/LICENSE| (c) 2009, 2013
//@ sourceMappingURL=hydra.min.map
*/

!function(a,b){"use strict";var c,d={},e,f={___order___:[]},g=a,h=Error,i="undefined",j={},k={},l="object",m=!1,n="function",o=m,p={global:{}},q=C(a.exports,l)&&C(a.module,l)&&C(a.module.exports,l)&&C(a.require,n),r,s,t;function u(a,b){var c;for(c in a)a.hasOwnProperty(c)&&b(a[c],c)}function v(){return new ib}function w(a,b,c,d){a.___order___.push(b),a[b]={__map__:c},d||(d=A(a[b])),a[b].__resolveDI__=d}function x(a,b,c,d,e,f){return function(g){c.nLenPromisesResolved++,f[a]=g,d===c.nLenPromisesResolved&&e[b].apply(e,f)}}function y(a,b){return function(){a.bCompleted=!0,a.sType=b,a.oResult=arguments;while(a.aPending[0])a.aPending.shift()[b].apply(a,arguments)}}function z(b){var c,d,e,g,h=f.___order___;for(w(f,"__",a,function(a){var b,c=v();return b=B(a),c.resolve(b),c}),e=0,g=h.length;g>e;e++)if(c=f[h[e]],d=c.__resolveDI__(b))return delete f.__,d;return delete f.__,m}function A(a){return function(b){var c=v();return a.__map__[b]?(c.resolve(a.__map__[b]),c):!1}}function B(c){var d=a,e=c.split("."),f;while(f=e.shift())d=d[f]!==b?d[f]:d[f]={};return d}function C(a,b){return typeof a===b}function D(a,b){return a instanceof b}function E(a,b){var c="The module "+a+" is not registered in the system";if(b)throw new h(c);return c}function F(a){try{return D(a,Event)}catch(c){if(a.altKey!==b&&(a.srcElement||a.target))return!0}return m}function G(b){var c=m,d=a.jQuery;return d&&(c=D(b,d)),c}function H(){}function I(){var a=Math,b=+new Date+"",c=a.floor(999999*a.random())+1;return b+"_"+c}function J(a){var b,c=Object.keys;return c?b=c(a).length:(b=0,u(a,function(){b++})),b}function K(a){return Object.prototype.toString.call(a)}function L(a){return K(a)==="["+l+" Function]"}function M(a){return K(a)==="["+l+" Array]"}function N(a){o=a}function O(a){return[].slice.call(a,0)}function P(a,b,c){u(d,function(d){d&&C(d,n)&&d(a,b,c)})}function Q(a,b,c,d,e){var f;f=j[b],e&&a.isModuleStarted(b)&&a.stop(b),C(f,i)?s.error(new h,E(b)):ab(b,void 0,function(a){f.instances[c]=a,a.__instance_id__=c,P(a,d,e),C(d,i)?a.init():a.init(d)})}function R(a,b){return u(b,function(c,d){a[d]=b[d]}),a}function S(a){var b;if(null==a||!C(a,l)||-1===a.constructor.toString().indexOf("Object()")||F(a)||G(a)||a.nodeType&&1===a.nodeType)return a;if(D(a,Date))return b=new Date,b.setTime(a.getTime()),b;if(D(a,Array))return b=O(a);if(D(a,Object))return b={},u(a,function(a,c){b[c]=S(a)}),b;throw new h("Unable to copy object!")}function T(a,b,c,d){a[b]=function(a,b){return function(){var d=O(arguments);try{return b.apply(this,d)}catch(e){return s.error(c,a,e),m}}}(b,d)}function U(a,b){var c=[];return C(a,i)||u(a,function(a,d){d===b&&(c=a)}),c}function V(a,c){return p[a]===b&&(p[a]={}),p[a][c]===b&&(p[a][c]=[]),p[a][c]}function W(a,b){var c=0,d;if(!C(a,i))for(d=a.length-1;d>=0;d--)a[d].subscriber===b&&(c++,a.splice(d,1));return c}function X(a,b,c){var d,e,f,g=0;return u(a,function(a,h){d=h.split(":"),e=b,f=h,"global"===d[0]&&(e=d[0],f=d[1]),g+=W(p[e][f],c)}),g}function Y(a,b,c){u(a,function(a,d){t.subscribeTo(b,d,a,c)})}function Z(a,b,c,d){a.handler.call(a.subscriber,b),o&&s.log(c,d,a)}t={subscribers:function(a,b){return U(p[a],b)},unsubscribeFrom:function(a,b,c){var d=V(a,b),e,f=d.length-1;for(;f>=0;f--)e=d[f],e.subscriber===c&&d.splice(f,1)},subscribeTo:function(a,b,c,d){var e=V(a,b);e.push({subscriber:d,handler:c})},subscribe:function(a){var c=a.events;return a&&c!==b?(u(c,function(c,d){p[d]===b&&(p[d]={}),Y(c,d,a)}),!0):m},unsubscribe:function(a){var c=0,d=a.events;return a&&d!==b?(u(d,function(d,e){p[e]===b&&(p[e]={}),c=X(d,e,a)}),c>0):m},publish:function(a,b,c){var d=O(this.subscribers(a,b)),e,f=d.length;if(0===f)return m;while(e=d.shift())Z(e,c,a,b);return!0},reset:function(){p={global:{}}}};function $(a,c){var d,e,g=[],h=0,i,k,l,m={mapping:[],dependencies:[]};c=(c!==b?c:j[a].dependencies||[]).concat();while(d=c.shift())C(d,"string")?(e=2===d.indexOf("_")?d.substr(0,3):0===d.indexOf("$")?d.substr(0,1):"",i=f[e]||f.gl_,d=d.replace(e,""),k=i.__map__[d],k=k?i.__resolveDI__(d):z(d),m.mapping.push(d)):(k=v(),k.resolve(d),m.mapping.push(j[a].dependencies[h])),g.push(k);return l=v(),jb.apply(jb,g).then(function(){l.resolve.apply(l,[m.mapping].concat(O(arguments)))}),l}function _(a,b,c){var d;function e(d){var e,f;e=j[a].creator.apply(j[a],[].slice.call(arguments,1)),e.dependencies=b,e.resolvedDependencies=d,e.__module_id__=a,f=e.init||H,e.__action__=e.__sandbox__=t,e.events=e.events||{},e.init=function(){var a=O(arguments).concat(k);return t.subscribe(e),f.apply(this,a)},e.handleAction=function(a){var b=this.events[a.type];C(b,i)||b.call(this,a)},e.onDestroy=e.onDestroy||e.destroy||function(){},e.destroy=function(){this.onDestroy(),t.unsubscribe(e),delete j[a].instances[e.__instance_id__]},c(e)}d=$(a,b),d.then(function(){e.apply(e,arguments)})}function ab(a,b,c){C(j[a],i)&&E(a,!0),_(a,b,function(b){o||u(b,function(c,d){L(c)&&T(b,d,a,b[d])}),c(b)})}function bb(a){u(a.instances,function(b){C(a,i)||C(b,i)||b.destroy()}),a.instances={}}s=a.console||{log:function(){},error:function(){}};function cb(a,b,c,d,e){var f,g,h,i,j,k;for(M(c)&&(f=O(c)),M(d)&&(g=O(d)),M(e)&&(h=O(e)),i=0,j=b.length;j>i;i++)k=b[i],c=f&&f[i]||I(),d=g&&g[i]||d,e=h&&h[i]||e,Q(a,k,c,d,e)}function db(a,b){var c=a.instances[b];C(a,i)||C(c,i)||(c.destroy(),delete a.instances[b])}function eb(a,b,c){u(b,function(b,d){a.stop(c,d)})}function fb(a){return C(j[a],i)?m:(delete j[a],!0)}function gb(a,b,c,d,e){C(c,"string")||(e=d,d=c,c=I()),Q(a,b,c,d,e)}function hb(){this.__super__={},this.instances={}}hb.prototype={type:"Module",getInstance:ab,register:function(a,b,d){return L(b)&&(d=b,b=[t,c,s,r]),j[a]=new kb(a,d),j[a].dependencies=b,j[a]},setInstance:function(a,b,c){var d=j[a];return d||E(a,!0),d.instances[b]=c,d},setVars:function(a){k=C(k,i)?a:R(k,a)},resetVars:function(){k={}},getVars:function(){return R({},k)},start:function(a,b,c,d){var e=M(a);e?cb(this,O(a),b,c,d):gb(this,a,b,c,d)},extend:function(a,b,c,d){var e=j[a],f,g;return g=v(),e?(ab(a,void 0,function(h){C(b,n)&&(d=b,b=a,c=[t,e,r.errorHandler(),r]),C(c,n)&&(d=c,c=[t,e,r.errorHandler(),r]),c.push(h),f=d.apply(d,c),j[b]=new kb(b,function(){var a={};return a=R(a,h),a=R(a,f),a=R(a,{__super__:{__call__:function(b,c){return h[b].apply(a,c)}}})}),j[b].dependencies=c,g.resolve(j[b])}),g):(s.log(E(a)),g.resolve(null),g)},decorate:function(){return this.extend.apply(this,arguments)},isModuleStarted:function(a,b){var c=m;return c=C(b,i)?!C(j[a],i)&&J(j[a].instances)>0:!C(j[a],i)&&!C(j[a].instances[b],i)},startAll:function(){u(j,function(a,b){C(a,i)||c.start(b,I())})},stop:function(a,b){var c;return c=j[a],C(c,i)?m:(C(b,i)?bb(c):db(c,b),!0)},stopAll:function(){u(j,function(a,b){C(a,i)||eb(c,a.instances,b)})},remove:function(a){var b=j[a];if(C(b,i))return null;if(!C(b,i))try{return b}finally{fb(a),w(f,"hm_",j)}return null},reset:function(){c.stopAll(),j={},w(f,"hm_",j)}};function ib(){this.aPending=[],this.bCompleted=!1,this.sType="",this.oResult=null,this.resolve=y(this,"resolve"),this.reject=y(this,"reject")}ib.prototype={then:function(a,b){return this.bCompleted?"resolve"===this.sType?a.apply(a,this.oResult):b.apply(b,this.oResult):this.aPending.push({resolve:a,reject:b}),this},done:function(a){return this.then(a,H)},fail:function(a){return this.then(H,a)}};function jb(){var a,b,c,d,e,f,g;for(a=O(arguments),c=a.length,d=v(),f={nLenPromisesResolved:0},g=[],b=0;c>b;b++)e=a[b],e.then(x(b,"resolve",f,c,d,g),x(b,"reject",f,c,d,g));return d}c=new hb,r={version:"3.9.0",bus:t,errorHandler:function(){return s},setErrorHandler:function(a){s=a},Promise:ib,Deferred:ib,when:jb,module:c,setDebug:N,getDebug:function(){return o},extend:function(a,b){this[a]=C(this[a],i)?b:R(this[a],b)},resolveDependencies:$,noConflict:function(a,b,c){return C(this[a],i)?m:(b[c]=this[a],!0)},addExtensionBeforeInit:function(a){d=R(d,a)},getCopyModules:function(){return S(j)},getCopyChannels:function(){return S(p)},setNamespace:function(a){g=a},addMapping:function(a,c,d){var e=f[a];e===b?w(f,a,c,d):R(f[a].__map__,c)},addAsyncMapping:function(a,b,c){this.addMapping(a,b,function(a){return c.call(b,a)})}},e={bus:t,module:c,log:s,api:r,global:a,doc:a.document||null},w(f,"$$_",e),w(f,"$",e),w(f,"pr_",k),w(f,"hm_",j),w(f,"ns_",g||a),w(f,"gl_",a);function kb(a,b){if(C(b,i))throw new h("Something goes wrong!");this.creator=b,this.instances={},this.sModuleId=a}kb.prototype={start:function(a){return c.start(this.sModuleId,a),this},extend:function(a,b){return c.extend(this.sModuleId,a,b),this},stop:function(){return c.stop(this.sModuleId),this}},a.Hydra=r,q?module.exports=r:typeof define!==i&&define("hydra",[],function(){return r})}(this);
//# sourceMappingURL=hydra.min.map