/*! Hydra.js v3.9.2 | Date:2014-02-05 | License: https://raw.github.com/tcorral/Hydra.js/master/LICENSE| (c) 2009, 2013
//@ sourceMappingURL=hydra.min.map
*/

!function(a,b){"use strict";var c,d={},e,f={___order___:[]},g=a,h="undefined",i={},j={},k="object",l=!1,m="function",n=l,o={global:{}},p=B(a.exports,k)&&B(a.module,k)&&B(a.module.exports,k)&&B(a.require,m),q,r,s;function t(a,b){var c;for(c in a)a.hasOwnProperty(c)&&b(a[c],c)}function u(){return new hb}function v(a,b,c,d){a.___order___.push(b),a[b]={__map__:c},d||(d=z(a[b])),a[b].__resolveDI__=d}function w(a,b,c,d,e,f){return function(g){c.nLenPromisesResolved++,f[a]=g,d===c.nLenPromisesResolved&&e[b].apply(e,f)}}function x(a,b){return function(){a.bCompleted=!0,a.sType=b,a.oResult=arguments;while(a.aPending[0])a.aPending.shift()[b].apply(a,arguments)}}function y(b){var c,d,e,g,h=f.___order___;for(v(f,"__",a,function(a){var b,c=u();return b=A(a),c.resolve(b),c}),e=0,g=h.length;g>e;e++)if(c=f[h[e]],d=c.__resolveDI__(b))return delete f.__,d;return delete f.__,l}function z(a){return function(b){var c=u();return a.__map__[b]?(c.resolve(a.__map__[b]),c):!1}}function A(c){var d=a,e=c.split("."),f;while(f=e.shift())d=d[f]!==b?d[f]:d[f]={};return d}function B(a,b){return typeof a===b}function C(a,b){return a instanceof b}function D(a,b){var c="The module "+a+" is not registered in the system";if(b)throw new Error(c);return c}function E(a){try{return C(a,Event)}catch(c){if(a.altKey!==b&&(a.srcElement||a.target))return!0}return l}function F(b){var c=l,d=a.jQuery;return d&&(c=C(b,d)),c}function G(){}function H(){var a=Math,b=+new Date+"",c=a.floor(999999*a.random())+1;return b+"_"+c}function I(a){var b,c=Object.keys;return c?b=c(a).length:(b=0,t(a,function(){b++})),b}function J(a){return Object.prototype.toString.call(a)}function K(a){return J(a)==="["+k+" Function]"}function L(a){return J(a)==="["+k+" Array]"}function M(a){n=a}function N(a){return[].slice.call(a,0)}function O(a,b,c){t(d,function(d){d&&B(d,m)&&d(a,b,c)})}function P(a,b,c,d,e){var f;f=i[b],e&&a.isModuleStarted(b)&&a.stop(b),B(f,h)?r.error(new Error,D(b)):_(b,void 0,function(a){f.instances[c]=a,a.__instance_id__=c,O(a,d,e),B(d,h)?a.init():a.init(d)})}function Q(a,b){return t(b,function(c,d){a[d]=b[d]}),a}function R(a){var b;if(null==a||!B(a,k)||-1===a.constructor.toString().indexOf("Object()")||E(a)||F(a)||a.nodeType&&1===a.nodeType)return a;if(C(a,Date))return b=new Date,b.setTime(a.getTime()),b;if(C(a,Array))return b=N(a);if(C(a,Object))return b={},t(a,function(a,c){b[c]=R(a)}),b;throw new Error("Unable to copy object!")}function S(a,b,c,d){a[b]=function(a,b){return function(){var d=N(arguments);try{return b.apply(this,d)}catch(e){return r.error(c,a,e),l}}}(b,d)}function T(a,b){var c=[];return B(a,h)||t(a,function(a,d){d===b&&(c=a)}),c}function U(a,c){return o[a]===b&&(o[a]={}),o[a][c]===b&&(o[a][c]=[]),o[a][c]}function V(a,b){var c=0,d;if(!B(a,h))for(d=a.length-1;d>=0;d--)a[d].subscriber===b&&(c++,a.splice(d,1));return c}function W(a,b,c){var d,e,f,g=0;return t(a,function(a,h){d=h.split(":"),e=b,f=h,"global"===d[0]&&(e=d[0],f=d[1]),g+=V(o[e][f],c)}),g}function X(a,b,c){t(a,function(a,d){s.subscribeTo(b,d,a,c)})}function Y(a,b,c,d){a.handler.call(a.subscriber,b),n&&r.log(c,d,a)}s={subscribers:function(a,b){return T(o[a],b)},unsubscribeFrom:function(a,b,c){var d=U(a,b),e,f=d.length-1;for(;f>=0;f--)e=d[f],e.subscriber===c&&d.splice(f,1)},subscribeTo:function(a,b,c,d){var e=U(a,b);e.push({subscriber:d,handler:c})},subscribe:function(a){var c=a.events;return a&&c!==b?(t(c,function(c,d){o[d]===b&&(o[d]={}),X(c,d,a)}),!0):l},unsubscribe:function(a){var c=0,d=a.events;return a&&d!==b?(t(d,function(d,e){o[e]===b&&(o[e]={}),c=W(d,e,a)}),c>0):l},publish:function(a,b,c){var d=N(this.subscribers(a,b)),e,f=d.length;if(0===f)return l;while(e=d.shift())Y(e,c,a,b);return!0},reset:function(){o={global:{}}}};function Z(a,c){var d,e,g=[],h=0,j,k,l,m={mapping:[],dependencies:[]};c=(c!==b?c:i[a].dependencies||[]).concat();while(d=c.shift())B(d,"string")?(e=2===d.indexOf("_")?d.substr(0,3):0===d.indexOf("$")?d.substr(0,1):"",j=f[e]||f.gl_,d=d.replace(e,""),k=j.__map__[d],k=k?j.__resolveDI__(d):y(d),m.mapping.push(d)):(k=u(),k.resolve(d),m.mapping.push(i[a].dependencies[h])),g.push(k);return l=u(),ib.apply(ib,g).then(function(){l.resolve.apply(l,[m.mapping].concat(N(arguments)))}),l}function $(a,b,c){var d;function e(d){var e,f;e=i[a].creator.apply(i[a],[].slice.call(arguments,1)),e.dependencies=b,e.resolvedDependencies=d,e.__module_id__=a,f=e.init||G,e.__action__=e.__sandbox__=s,e.events=e.events||{},e.init=function(){var a=N(arguments).concat(j);return s.subscribe(e),f.apply(this,a)},e.handleAction=function(a){var b=this.events[a.type];B(b,h)||b.call(this,a)},e.onDestroy=e.onDestroy||e.destroy||function(){},e.destroy=function(){this.onDestroy(),s.unsubscribe(e),delete i[a].instances[e.__instance_id__]},c(e)}d=Z(a,b),d.then(function(){e.apply(e,arguments)})}function _(a,b,c){B(i[a],h)&&D(a,!0),$(a,b,function(b){n||t(b,function(c,d){K(c)&&S(b,d,a,b[d])}),c(b)})}function ab(a){t(a.instances,function(b){B(a,h)||B(b,h)||b.destroy()}),a.instances={}}r=a.console||{log:function(){},error:function(){}};function bb(a,b,c,d,e){var f,g,h,i,j,k;for(L(c)&&(f=N(c)),L(d)&&(g=N(d)),L(e)&&(h=N(e)),i=0,j=b.length;j>i;i++)k=b[i],c=f&&f[i]||H(),d=g&&g[i]||d,e=h&&h[i]||e,P(a,k,c,d,e)}function cb(a,b){var c=a.instances[b];B(a,h)||B(c,h)||(c.destroy(),delete a.instances[b])}function db(a,b,c){t(b,function(b,d){a.stop(c,d)})}function eb(a){return B(i[a],h)?l:(delete i[a],!0)}function fb(a,b,c,d,e){B(c,"string")||(e=d,d=c,c=H()),P(a,b,c,d,e)}function gb(){this.__super__={},this.instances={}}gb.prototype={type:"Module",getInstance:_,register:function(a,b,d){return K(b)&&(d=b,b=[s,c,r,q]),i[a]=new jb(a,d),i[a].dependencies=b,i[a]},setInstance:function(a,b,c){var d=i[a];return d||D(a,!0),d.instances[b]=c,d},setVars:function(a){j=B(j,h)?a:Q(j,a)},resetVars:function(){j={}},getVars:function(){return Q({},j)},start:function(a,b,c,d){var e=L(a);e?bb(this,N(a),b,c,d):fb(this,a,b,c,d)},extend:function(a,b,c,d){var e=i[a],f,g;return g=u(),e?(_(a,void 0,function(h){B(b,m)&&(d=b,b=a,c=[s,e,q.errorHandler(),q]),B(c,m)&&(d=c,c=[s,e,q.errorHandler(),q]),c.push(h),f=d.apply(d,c),i[b]=new jb(b,function(){var a={};return a=Q(a,h),a=Q(a,f),a=Q(a,{__super__:{__call__:function(b,c){return h[b].apply(a,c)}}})}),i[b].dependencies=c,g.resolve(i[b])}),g):(r.log(D(a)),g.resolve(null),g)},decorate:function(){return this.extend.apply(this,arguments)},isModuleStarted:function(a,b){var c=l;return c=B(b,h)?!B(i[a],h)&&I(i[a].instances)>0:!B(i[a],h)&&!B(i[a].instances[b],h)},startAll:function(){t(i,function(a,b){B(a,h)||c.start(b,H())})},stop:function(a,b){var c;return c=i[a],B(c,h)?l:(B(b,h)?ab(c):cb(c,b),!0)},stopAll:function(){t(i,function(a,b){B(a,h)||db(c,a.instances,b)})},remove:function(a){var b=i[a];if(B(b,h))return null;if(!B(b,h))try{return b}finally{eb(a),v(f,"hm_",i)}return null},reset:function(){c.stopAll(),i={},v(f,"hm_",i)}};function hb(){this.aPending=[],this.bCompleted=!1,this.sType="",this.oResult=null,this.resolve=x(this,"resolve"),this.reject=x(this,"reject")}hb.prototype={then:function(a,b){return this.bCompleted?"resolve"===this.sType?a.apply(a,this.oResult):b.apply(b,this.oResult):this.aPending.push({resolve:a,reject:b}),this},done:function(a){return this.then(a,G)},fail:function(a){return this.then(G,a)},all:function(){return ib.apply(ib,arguments)},"catch":function(a){return this.fail(a)}};function ib(){var a,b,c,d,e,f,g;if(a=N(arguments),c=a.length,d=u(),f={nLenPromisesResolved:0},g=[],0===a.length)d.resolve();else for(b=0;c>b;b++)e=a[b],e.then(w(b,"resolve",f,c,d,g),w(b,"reject",f,c,d,g));return d}c=new gb,q={version:"3.9.2",bus:s,errorHandler:function(){return r},setErrorHandler:function(a){r=a},Promise:hb,Deferred:hb,when:ib,module:c,setDebug:M,getDebug:function(){return n},extend:function(a,b){this[a]=B(this[a],h)?b:Q(this[a],b)},resolveDependencies:Z,noConflict:function(a,b,c){return B(this[a],h)?l:(b[c]=this[a],!0)},addExtensionBeforeInit:function(a){d=Q(d,a)},getCopyModules:function(){return R(i)},getCopyChannels:function(){return R(o)},setNamespace:function(a){g=a},addMapping:function(a,c,d){var e=f[a];e===b?v(f,a,c,d):Q(f[a].__map__,c)},addAsyncMapping:function(a,b,c){this.addMapping(a,b,function(a){return c.call(b,a)})}},e={bus:s,module:c,log:r,api:q,global:a,doc:a.document||null},v(f,"$$_",e),v(f,"$",e),v(f,"pr_",j),v(f,"hm_",i),v(f,"ns_",g||a),v(f,"gl_",a);function jb(a,b){if(B(b,h))throw new Error("Something goes wrong!");this.creator=b,this.instances={},this.sModuleId=a}jb.prototype={start:function(a){return c.start(this.sModuleId,a),this},extend:function(a,b){return c.extend(this.sModuleId,a,b),this},stop:function(){return c.stop(this.sModuleId),this}},a.Hydra=q,p?module.exports=q:typeof define!==h&&define("hydra",[],function(){return q})}(this);
//# sourceMappingURL=hydra.min.map