/*! Hydra.js v3.9.10 | Date:2014-03-12 | License: https://raw.github.com/tcorral/Hydra.js/master/LICENSE| (c) 2009, 2013
//@ sourceMappingURL=hydra.min.map
*/

!function(a,b){"use strict";a.__type__="global",a.document&&(a.document.__type__="doc"),a.console&&(a.console.__type__="log");var c={},d,e={___order___:[]},f=a,g="undefined",h={},i={},j="object",k=!1,l="function",m=k,n={global:{}},o=C(a.exports,j)&&C(a.module,j)&&C(a.module.exports,j)&&C(a.require,l),p,q,r,s;function t(a,b){var c;for(c in a)a.hasOwnProperty(c)&&b(a[c],c)}function u(a){var b;try{b=Object.keys(a)}catch(c){t(a,function(a,c){b.push(c)})}return b}function v(a){return new kb(a)}function w(a,b,c,d){a.___order___.push(b),a[b]={__map__:c},d||(d=A(a[b])),a[b].__resolveDI__=d}function x(a,b,c,d,e,f){return function(g){c.nLenPromisesResolved++,f[a]=g,d===c.nLenPromisesResolved&&e[b].apply(e,f)}}function y(a,b){return function(){a.bCompleted=!0,a.sType=b,a.oResult=arguments;while(a.aPending[0])a.aPending.shift()[b].apply(a,arguments)}}function z(b){var c,d,f,g,h=e.___order___;for(w(e,"__",a,function(a){var b,c=v();return b=B(a),c.resolve(b),c}),f=0,g=h.length;g>f;f++)if(c=e[h[f]],d=c.__resolveDI__(b))return delete e.__,d;return delete e.__,k}function A(a){return function(b){var c=v();return a.__map__[b]?(c.resolve(a.__map__[b]),c):!1}}function B(c){var d=a,e=c.split("."),f;while(f=e.shift())d=d[f]!==b?d[f]:d[f]={};return d}function C(a,b){return typeof a===b}function D(a,b){return a instanceof b}function E(a,b){var c="The module "+a+" is not registered in the system";if(b)throw new Error(c);return c}function F(a){try{return D(a,Event)}catch(c){if(a.altKey!==b&&(a.srcElement||a.target))return!0}return k}function G(b){var c=k,d=a.jQuery;return d&&(c=D(b,d)),c}function H(){}function I(){var a=Math,b=+new Date+"",c=a.floor(999999*a.random())+1;return b+"_"+c}function J(a){return u(a).length}function K(a){return Object.prototype.toString.call(a)}function L(a){return K(a)==="["+j+" Function]"}function M(a){return K(a)==="["+j+" Array]"}function N(a){m=a}function O(a){return[].slice.call(a,0)}function P(a,b,d){t(c,function(c){c&&C(c,l)&&c(a,b,d)})}function Q(a,b,c,d,e){var f;f=h[b],e&&a.isModuleStarted(b)&&a.stop(b),C(f,g)?q.error(new Error,E(b)):bb(b,void 0,function(a){f.instances[c]=a,a.__instance_id__=c,P(a,d,e),C(d,g)?a.init():a.init(d)})}function R(a,b){return t(b,function(c,d){a[d]=b[d]}),a}function S(a){var b;if(null==a||!C(a,j)||-1===a.constructor.toString().indexOf("Object()")||F(a)||G(a)||a.nodeType&&1===a.nodeType)return a;if(D(a,Date))return b=new Date,b.setTime(a.getTime()),b;if(D(a,Array))return b=O(a);if(D(a,Object))return b={},t(a,function(a,c){b[c]=S(a)}),b;throw new Error("Unable to copy object!")}function T(a,b,c,d){a[b]=function(a,b){return function(){var d=O(arguments);try{return b.apply(this,d)}catch(e){return q.error(c,a,e),k}}}(b,d)}function U(a,b){var c=[];return C(a,g)||t(a,function(a,d){d===b&&(c=a)}),c}function V(a,c){return n[a]===b&&(n[a]={}),n[a][c]===b&&(n[a][c]=[]),n[a][c]}function W(a,b){var c=0,d;if(!C(a,g))for(d=a.length-1;d>=0;d--)a[d].subscriber===b&&(c++,a.splice(d,1));return c}function X(a,b,c){var d,e,f,g=0;return t(a,function(a,h){d=h.split(":"),e=b,f=h,"global"===d[0]&&(e=d[0],f=d[1]),g+=W(n[e][f],c)}),g}function Y(a,b,c){t(a,function(a,d){r.subscribeTo(b,d,a,c)})}function Z(a,b,c,d){a.handler.call(a.subscriber,b),m&&q.log(c,d,a)}function $(a){return a}r={subscribers:function(a,b){return U(n[a],b)},unsubscribeFrom:function(a,b,c){var d=V(a,b),e,f=d.length-1;for(;f>=0;f--)e=d[f],e.subscriber===c&&d.splice(f,1)},subscribeTo:function(a,b,c,d){var e=V(a,b);e.push({subscriber:d,handler:c})},subscribe:function(a){var c=a.events;return a&&c!==b?(t(c,function(c,d){n[d]===b&&(n[d]={}),Y(c,d,a)}),!0):k},unsubscribe:function(a){var c=0,d=a.events;return a&&d!==b?(t(d,function(d,e){n[e]===b&&(n[e]={}),c=X(d,e,a)}),c>0):k},publish:function(a,b,c){var d=O(this.subscribers(a,b)),e,f=d.length;if(0===f)return k;c=$(c);while(e=d.shift())Z(e,c,a,b);return!0},preprocessorPublishData:function(a){$=function(b){return a(b,S)}},reset:function(){n={global:{}}},__type__:"bus"};function _(a,b){var c,d,f,g,h=[],i=0,j,k,l,m,n={mapping:[],dependencies:[]};f=p.getCopyModules(),g=f[a],g||(g={}),g.dependencies||(g.dependencies=["$$_bus","$$_module","$$_log","gl_Hydra"]),k=g.dependencies,M(k)||"object"!=typeof k||(k=u(k)),b=(M(b)?b:k||[]).concat();while(c=b.shift())C(c,"string")?(d=2===c.indexOf("_")?c.substr(0,3):0===c.indexOf("$")?c.substr(0,1):"",j=e[d]||e.gl_,c=c.replace(d,""),l=j.__map__[c],l=l?j.__resolveDI__(c):z(c),n.mapping.push(c)):(l=v(),l.resolve(c),n.mapping.push(c.__type__||g.dependencies[i])),h.push(l);return m=v(),lb.apply(lb,h).then(function(){m.resolve.apply(m,[n.mapping].concat(O(arguments)))}),m}function ab(a,b,c){var d;function e(d){var e,f;e=h[a].creator.apply(h[a],[].slice.call(arguments,1)),e.__children__=[],e.dependencies=b||[].slice.call(arguments,1),e.resolvedDependencies=d,e.__module_id__=a,f=e.init||H,e.__action__=e.__sandbox__=r,e.events=e.events||{},e.init=function(){var a=O(arguments).concat(i);return 0===e.__children__.length&&r.subscribe(e),f.apply(this,a)},e.handleAction=function(a){var b=this.events[a.type];C(b,g)||b.call(this,a)},e.onDestroy=e.onDestroy||e.destroy||function(){},e.destroy=function(){this.onDestroy(),r.unsubscribe(e),delete h[a].instances[e.__instance_id__]},c(e)}d=_(a,b),d.then(function(){e.apply(e,arguments)})}function bb(a,b,c){C(h[a],g)&&E(a,!0),ab(a,b,function(b){m||t(b,function(c,d){L(c)&&T(b,d,a,b[d])}),c(b)})}function cb(a){t(a.instances,function(b){C(a,g)||C(b,g)||b.destroy()}),a.instances={}}q=a.console||{log:function(){},error:function(){},__type__:"log"};function db(a,b,c,d,e){var f,g,h,i,j,k;for(M(c)&&(f=O(c)),M(d)&&(g=O(d)),M(e)&&(h=O(e)),i=0,j=b.length;j>i;i++)k=b[i],c=f&&f[i]||I(),d=g&&g[i]||d,e=h&&h[i]||e,Q(a,k,c,d,e)}function eb(a,b){var c=a.instances[b];C(a,g)||C(c,g)||(c.destroy(),delete a.instances[b])}function fb(a,b){t(a.instances,function(a,c){s.stop(b,c)})}function gb(a){return C(h[a],g)?k:(delete h[a],!0)}function hb(a,b,c,d,e){C(c,"string")||(e=d,d=c,c=I()),Q(a,b,c,d,e)}function ib(a,b){return function(){return a.apply(b||this,arguments)}}function jb(a,b){return function(c,d){"function"==typeof c?a[d]=ib(c):M(c)?b[d]=O(c):"object"==typeof c&&null!==c?b[d]=R({},c):D(c,Date)?(b[d]=new Date,b[d].setTime(c.getTime())):b[d]=c}}s={__super__:{},instances:{},__type__:"module",type:"Module",getInstance:bb,register:function(a,b,c){return L(b)&&(c=b,b=["$$_bus","$$_module","$$_log","gl_Hydra"]),h[a]=new mb(a,c),h[a].dependencies=b,h[a]},setInstance:function(a,b,c){var d=h[a];return d||E(a,!0),d.instances[b]=c,d},setVars:function(a){i=C(i,g)?a:R(i,a)},resetVars:function(){i={}},getVars:function(){return R({},i)},start:function(a,b,c,d){var e=M(a);e?db(this,O(a),b,c,d):hb(this,a,b,c,d)},extend:function(a,b,c,d){var e=h[a],f,g;return g=v(),e?(bb(a,c,function(e){var i,j=["$$_bus","$$_module","$$_log","gl_Hydra"];C(b,l)&&(d=b,b=a,c=j),C(c,l)&&(d=c,c=j),i=_(b,c),i.then(function(){var i={},j={},k,l;h[b]=new mb(b,function(){var c=[].slice.call(arguments);return c.push(e),f=d.apply(d,c),C(a,"string")&&C(b,"string")&&e.__children__.push(f),t(e,jb(j,i)),k=function(){var a=this;t(i,function(b,c){a[c]=b})},k.prototype=j,l=function(){var b=this,c=j;k.apply(b,arguments),c.parentModule=a,t(f,jb(b,b)),this.uber=c,e.uber&&(c.uber={},t(e.uber,function(a,d){var e=ib(a,b);b.uber[d]||(b.uber[d]=e),c.uber[d]=e})),this.__children__=[],this.__super__={__call__:function(a,b){return e[a].apply(this,b)}}},l.prototype=new k,new l}),h[b].dependencies=c,g.resolve(h[b])})}),g):(q.log(E(a)),g.resolve(null),g)},decorate:function(){return this.extend.apply(this,arguments)},isModuleStarted:function(a,b){var c=k,d=C(h[a],g);return c=C(b,g)?!d&&J(h[a].instances)>0:!d&&!C(h[a].instances[b],g)},startAll:function(){t(h,function(a,b){C(a,g)||s.start(b,I())})},stop:function(a,b){var c;return c=h[a],C(c,g)?k:(C(b,g)?cb(c):eb(c,b),!0)},stopAll:function(){t(h,function(a,b){C(a,g)||fb(a,b)})},remove:function(a){var b=h[a];if(C(b,g))return null;if(!C(b,g))try{return s}finally{gb(a),w(e,"hm_",h)}return null},reset:function(){s.stopAll(),h={},w(e,"hm_",h)}};function kb(a){this.aPending=[],this.bCompleted=!1,this.sType="",this.oResult=null,a=a||H,this.resolve=y(this,"resolve"),this.reject=y(this,"reject"),a(this.resolve,this.reject)}kb.prototype={then:function(a,b){return this.bCompleted?"resolve"===this.sType?a.apply(a,this.oResult):b.apply(b,this.oResult):this.aPending.push({resolve:a,reject:b}),this},done:function(a){return this.then(a,H)},fail:function(a){return this.then(H,a)},all:function(){return lb.apply(lb,arguments)},"catch":function(a){return this.fail(a)}};function lb(){var a,b,c,d,e,f,g;if(a=O(arguments),c=a.length,d=v(),f={nLenPromisesResolved:0},g=[],0===a.length)d.resolve();else for(b=0;c>b;b++)e=a[b],e.then(x(b,"resolve",f,c,d,g),x(b,"reject",f,c,d,g));return d}p={version:"3.9.9",bus:r,errorHandler:function(){return q},setErrorHandler:function(a){q=a,q.__type__="log"},Promise:kb,Deferred:kb,when:lb,module:s,setDebug:N,getDebug:function(){return m},extend:function(a,b){this[a]=C(this[a],g)?b:R(this[a],b)},resolveDependencies:_,noConflict:function(a,b,c){return C(this[a],g)?k:(b[c]=this[a],!0)},addExtensionBeforeInit:function(a){c=R(c,a)},getCopyModules:function(){return S(h)},getCopyChannels:function(){return S(n)},setNamespace:function(a){f=a},addMapping:function(a,c,d){var f=e[a];f===b?w(e,a,c,d):R(e[a].__map__,c)},addAsyncMapping:function(a,b,c){this.addMapping(a,b,function(a){return c.call(b,a)})},__type__:"api"},d={bus:r,module:s,log:q,api:p,global:a,doc:a.document||null},w(e,"$$_",d),w(e,"$",d),w(e,"pr_",i),w(e,"hm_",h),w(e,"ns_",f||a),w(e,"gl_",a);function mb(a,b){if(C(b,g))throw new Error("Something goes wrong!");this.creator=b,this.instances={},this.sModuleId=a}mb.prototype={start:function(a){return s.start(this.sModuleId,a),this},extend:function(a,b,c){return s.extend(this.sModuleId,a,b,c),this},stop:function(){return s.stop(this.sModuleId),this}},a.Hydra=p,o?module.exports=p:typeof define!==g&&define("hydra",[],function(){return p})}(this);
//# sourceMappingURL=hydra.min.map