/*! Hydra.js v3.9.0 | Date:2014-01-30 | License: https://raw.github.com/tcorral/Hydra.js/master/LICENSE| (c) 2009, 2013
//@ sourceMappingURL=hydra.min.map
*/

!function(a,b){"use strict";var c,d,e={___order___:[]},f=a,g=Error,h="undefined",i={},j={},k="object",l=!1,m="function",n=l,o={global:{}},p=F(a.exports,k)&&F(a.module,k)&&F(a.module.exports,k)&&F(a.require,m),q,r,s,t,u,v,w;function x(a,b){var c;for(c in a)a.hasOwnProperty(c)&&b(a[c],c)}function y(){return new v}function z(a,b,c,d){a.___order___.push(b),a[b]={__map__:c},d||(d=D(a[b])),a[b].__resolveDI__=d}function A(a,b,c,d,e,f){return function(g){c.nLenPromisesResolved++,f[a]=g,d===c.nLenPromisesResolved&&e[b].apply(e,f)}}function B(a,b){return function(){a.bCompleted=!0,a.sType=b,a.oResult=arguments;while(a.aPending[0])a.aPending.shift()[b].apply(a,arguments)}}function C(b){var c,d,f,g,h=e.___order___;for(z(e,"__",a,function(a){var b,c=y();return b=E(a),c.resolve(b),c}),f=0,g=h.length;g>f;f++)if(c=e[h[f]],d=c.__resolveDI__(b))return delete e.__,d;delete e.__}function D(a){return function(b){var c=y();return a.__map__[b]?(c.resolve(a.__map__[b]),c):!1}}function E(c){var d=a,e=c.split("."),f;while(f=e.shift())d=d[f]!==b?d[f]:d[f]={};return d}function F(a,b){return typeof a===b}function G(a,b){return a instanceof b}function H(a,b){var c="The module "+a+" is not registered in the system";if(b)throw new g(c);return c}function I(a){try{return G(a,Event)}catch(c){if(a.altKey!==b&&(a.srcElement||a.target))return!0}return l}function J(b){var c=l,d=a.jQuery;return d&&(c=G(b,d)),c}function K(){}function L(){var a=Math,b=+new Date+"",c=a.floor(999999*a.random())+1;return b+"_"+c}function M(a){var b,c=Object.keys;return c?b=c(a).length:(b=0,x(a,function(){b++})),b}function N(a){return Object.prototype.toString.call(a)}function O(a){return N(a)==="["+k+" Function]"}function P(a){return N(a)==="["+k+" Array]"}function Q(a){n=a}function R(a){return[].slice.call(a,0)}function S(a,b,c,d){x(b,function(b,e){a[e]&&F(b,m)&&b(a,c,d)})}function T(a,b,c,d,e){var f;f=i[b],e&&a.isModuleStarted(b)&&a.stop(b),F(f,h)?s.error(new g,H(b)):$(b,void 0,function(b){f.instances[c]=b,b.__instance_id__=c,S(b,a.oModifyInit,d,e),F(d,h)?b.init():b.init(d)})}function U(a,b){return x(b,function(c,d){a[d]=b[d]}),a}function V(a){var b;if(null==a||!F(a,k)||-1===a.constructor.toString().indexOf("Object()")||I(a)||J(a)||a.nodeType&&1===a.nodeType)return a;if(G(a,Date))return b=new Date,b.setTime(a.getTime()),b;if(G(a,Array))return b=R(a);if(G(a,Object))return b={},x(a,function(a,c){b[c]=V(a)}),b;throw new g("Unable to copy object!")}function W(a,b,c,d){a[b]=function(a,b){return function(){var d=R(arguments);try{return b.apply(this,d)}catch(e){return s.error(c,a,e),l}}}(b,d)}function X(a,b){var c=[];return F(a,h)||x(a,function(a,d){d===b&&(c=a)}),c}u={subscribers:function(a,b){return X(o[a],b)},_getChannelEvents:function(a,c){return o[a]===b&&(o[a]={}),o[a][c]===b&&(o[a][c]=[]),o[a][c]},_addSubscribers:function(a,b,c){var d=this;x(a,function(a,e){d.subscribeTo(b,e,a,c)})},unsubscribeFrom:function(a,b,c){var d=this._getChannelEvents(a,b),e,f=d.length-1;for(;f>=0;f--)e=d[f],e.subscriber===c&&d.splice(f,1)},subscribeTo:function(a,b,c,d){var e=this._getChannelEvents(a,b);e.push({subscriber:d,handler:c})},subscribe:function(a){var c=this,d=a.events;return a&&d!==b?(x(d,function(d,e){o[e]===b&&(o[e]={}),c._addSubscribers(d,e,a)}),!0):l},_removeSubscribers:function(a,b){var c=0,d;if(!F(a,h))for(d=a.length-1;d>=0;d--)a[d].subscriber===b&&(c++,a.splice(d,1));return c},_removeSubscribersPerEvent:function(a,b,c){var d=this,e,f,g,h=0;return x(a,function(a,i){e=i.split(":"),f=b,g=i,"global"===e[0]&&(f=e[0],g=e[1]),h+=d._removeSubscribers(o[f][g],c)}),h},unsubscribe:function(a){var c=this,d=0,e=a.events;return a&&e!==b?(x(e,function(e,f){o[f]===b&&(o[f]={}),d=c._removeSubscribersPerEvent(e,f,a)}),d>0):l},_executeHandler:function(a,b,c,d){a.handler.call(a.subscriber,b),n&&s.log(c,d,a)},publish:function(a,b,c){var d=R(this.subscribers(a,b)),e,f=d.length;if(0===f)return l;while(e=d.shift())this._executeHandler(e,c,a,b);return!0},reset:function(){o={global:{}}}};function Y(a,c){var d,f,g=[],h=0,j,k,l,m={mapping:[],dependencies:[]};c=(c!==b?c:i[a].dependencies||[]).concat();while(d=c.shift())F(d,"string")?(f=2===d.indexOf("_")?d.substr(0,3):0===d.indexOf("$")?d.substr(0,1):"",j=e[f]||e.gl_,d=d.replace(f,""),k=j.__map__[d],k=k?j.__resolveDI__(d):C(d),m.mapping.push(d)):(k=y(),k.resolve(d),m.mapping.push(i[a].dependencies[h])),g.push(k);return l=y(),w.apply(w,g).then(function(){l.resolve.apply(l,[m.mapping].concat(R(arguments)))}),l}function Z(a,b,c){var d;function e(d){var e,f;e=i[a].creator.apply(i[a],[].slice.call(arguments,1)),e.dependencies=b,e.resolvedDependencies=d,e.__module_id__=a,f=e.init||K,e.__action__=e.__sandbox__=u,e.events=e.events||{},e.init=function(){var a=R(arguments).concat(j);return u.subscribe(e),f.apply(this,a)},e.handleAction=function(a){var b=this.events[a.type];F(b,h)||b.call(this,a)},e.onDestroy=e.onDestroy||e.destroy||function(){},e.destroy=function(){this.onDestroy(),u.unsubscribe(e),delete i[a].instances[e.__instance_id__]},c(e)}d=Y(a,b),d.then(function(){e.apply(e,arguments)})}function $(a,b,c){F(i[a],h)&&H(a,!0),Z(a,b,function(b){n||x(b,function(c,d){O(c)&&W(b,d,a,b[d])}),c(b)})}s=a.console||{log:function(){},error:function(){}},t=function(){this.__super__={},this.instances={}},t.prototype={type:"Module",getInstance:$,oModifyInit:{},register:function(a,b,d){return O(b)&&(d=b,b=[u,c,s,r]),i[a]=new q(a,d),i[a].dependencies=b,i[a]},_setSuper:function(a,b){a.__super__={},a.__super__.__instance__=b,a.__super__.__call__=function(b,c){var d=this;while(d.hasOwnProperty(b)===l)d=d.__instance__.__super__;return d[b].apply(a,c)}},_callInSuper:function(a){return function(){var b=R(arguments);a.apply(this,b)}},_mergeModuleExtended:function(a,b){x(b,function(b,c){!F(a.__super__,h)&&O(a[c])&&(a.__super__[c]=this._callInSuper(a[c])),a[c]=b})},_mergeModuleBase:function(a,b){x(b,function(b,c){"__super__"!==c&&(a[c]=b)})},_merge:function(a,b){var c={};return this._setSuper(c,a),this._mergeModuleBase(c,a),this._mergeModuleExtended(c,b),c},setInstance:function(a,b,c){var d=i[a];return d||H(a,!0),d.instances[b]=c,d},setVars:function(a){j=F(j,h)?a:U(j,a)},resetVars:function(){j={}},getVars:function(){return U({},j)},_multiModuleStart:function(a,b,c,d){var e,f,g,h,i,j;for(P(b)&&(e=R(b)),P(c)&&(f=R(c)),P(d)&&(g=R(d)),h=0,i=a.length;i>h;h++)j=a[h],b=e&&e[h]||L(),c=f&&f[h]||c,d=g&&g[h]||d,T(this,j,b,c,d)},_singleModuleStart:function(a,b,c,d){F(b,"string")||(d=c,c=b,b=L()),T(this,a,b,c,d)},start:function(a,b,c,d){var e=P(a);e?this._multiModuleStart(R(a),b,c,d):this._singleModuleStart(a,b,c,d)},extend:function(a,b,c,d){var e=i[a],f,g;return g=y(),e?($(a,void 0,function(h){F(b,m)&&(d=b,b=a,c=[u,e,r.errorHandler(),r]),F(c,m)&&(d=c,c=[u,e,r.errorHandler(),r]),c.push(h),f=d.apply(d,c),i[b]=new q(b,function(){var a={};return a=U(a,h),a=U(a,f),a=U(a,{__super__:{__call__:function(b,c){return h[b].apply(a,c)}}})}),i[b].dependencies=c,g.resolve(i[b])}),g):(s.log(H(a)),g.resolve(null),g)},decorate:function(){return this.extend.apply(this,arguments)},isModuleStarted:function(a,b){var c=l;return c=F(b,h)?!F(i[a],h)&&M(i[a].instances)>0:!F(i[a],h)&&!F(i[a].instances[b],h)},startAll:function(){var a=this;x(i,function(b,c){F(b,h)||a.start(c,L())})},_multiModuleStop:function(a){x(a.instances,function(b){F(a,h)||F(b,h)||b.destroy()}),a.instances={}},_singleModuleStop:function(a,b,c){var d=a.instances[c];F(a,h)||F(d,h)||(d.destroy(),delete a.instances[c])},stop:function(a,b){var c;return c=i[a],F(c,h)?l:(F(b,h)?this._multiModuleStop(c):this._singleModuleStop(c,a,b),!0)},_stopOneByOne:function(a,b){var c=this;x(a,function(a,d){c.stop(b,d)})},stopAll:function(){var a=this;x(i,function(b,c){F(b,h)||a._stopOneByOne(b.instances,c)})},_delete:function(a){return F(i[a],h)?l:(delete i[a],!0)},remove:function(a){var b=i[a];if(F(b,h))return null;if(!F(b,h))try{return b}finally{this._delete(a),z(e,"hm_",i)}return null},reset:function(){c.stopAll(),i={},z(e,"hm_",i)}},v=function(){this.aPending=[],this.bCompleted=!1,this.sType="",this.oResult=null,this.resolve=B(this,"resolve"),this.reject=B(this,"reject")},v.prototype.then=function(a,b){return this.bCompleted?"resolve"===this.sType?a.apply(a,this.oResult):b.apply(b,this.oResult):this.aPending.push({resolve:a,reject:b}),this},w=function(){var a,b,c,d,e,f,g;for(a=R(arguments),c=a.length,d=y(),f={nLenPromisesResolved:0},g=[],b=0;c>b;b++)e=a[b],e.then(A(b,"resolve",f,c,d,g),A(b,"reject",f,c,d,g));return d},c=new t,r={version:"3.9.0",bus:u,errorHandler:function(){return s},setErrorHandler:function(a){s=a},Promise:v,Deferred:v,when:w,module:c,setDebug:Q,getDebug:function(){return n},extend:function(a,b){this[a]=F(this[a],h)?b:U(this[a],b)},resolveDependencies:Y,noConflict:function(a,b,c){return F(this[a],h)?l:(b[c]=this[a],!0)},addExtensionBeforeInit:function(a){c.oModifyInit=U(c.oModifyInit,a)},getCopyModules:function(){return V(i)},getCopyChannels:function(){return V(o)},setNamespace:function(a){f=a},addMapping:function(a,c,d){var f=e[a];f===b?z(e,a,c,d):U(e[a].__map__,c)},addAsyncMapping:function(a,b,c){this.addMapping(a,b,function(a){return c.call(b,a)})}},d={bus:u,module:c,log:s,api:r,global:a,doc:a.document||null},z(e,"$$_",d),z(e,"$",d),z(e,"pr_",j),z(e,"hm_",i),z(e,"ns_",f||a),z(e,"gl_",a),q=function(a,b){if(F(b,h))throw new g("Something goes wrong!");this.creator=b,this.instances={},this.sModuleId=a},q.prototype={start:function(a){return c.start(this.sModuleId,a),this},extend:function(a,b){return c.extend(this.sModuleId,a,b),this},stop:function(){return c.stop(this.sModuleId),this}},a.Hydra=r,p?module.exports=r:typeof define!==h&&define("hydra",[],function(){return r})}(this);
//# sourceMappingURL=hydra.min.map