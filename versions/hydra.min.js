/*! Hydra.js v3.9.6 | Date:2014-02-11 | License: https://raw.github.com/tcorral/Hydra.js/master/LICENSE| (c) 2009, 2013
//@ sourceMappingURL=hydra.min.map
*/

!function(a,b){"use strict";var c={},d,e={___order___:[]},f=a,g="undefined",h={},i={},j="object",k=!1,l="function",m=k,n={global:{}},o=B(a.exports,j)&&B(a.module,j)&&B(a.module.exports,j)&&B(a.require,l),p,q,r,s;function t(a,b){var c;for(c in a)a.hasOwnProperty(c)&&b(a[c],c)}function u(){return new hb}function v(a,b,c,d){a.___order___.push(b),a[b]={__map__:c},d||(d=z(a[b])),a[b].__resolveDI__=d}function w(a,b,c,d,e,f){return function(g){c.nLenPromisesResolved++,f[a]=g,d===c.nLenPromisesResolved&&e[b].apply(e,f)}}function x(a,b){return function(){a.bCompleted=!0,a.sType=b,a.oResult=arguments;while(a.aPending[0])a.aPending.shift()[b].apply(a,arguments)}}function y(b){var c,d,f,g,h=e.___order___;for(v(e,"__",a,function(a){var b,c=u();return b=A(a),c.resolve(b),c}),f=0,g=h.length;g>f;f++)if(c=e[h[f]],d=c.__resolveDI__(b))return delete e.__,d;return delete e.__,k}function z(a){return function(b){var c=u();return a.__map__[b]?(c.resolve(a.__map__[b]),c):!1}}function A(c){var d=a,e=c.split("."),f;while(f=e.shift())d=d[f]!==b?d[f]:d[f]={};return d}function B(a,b){return typeof a===b}function C(a,b){return a instanceof b}function D(a,b){var c="The module "+a+" is not registered in the system";if(b)throw new Error(c);return c}function E(a){try{return C(a,Event)}catch(c){if(a.altKey!==b&&(a.srcElement||a.target))return!0}return k}function F(b){var c=k,d=a.jQuery;return d&&(c=C(b,d)),c}function G(){}function H(){var a=Math,b=+new Date+"",c=a.floor(999999*a.random())+1;return b+"_"+c}function I(a){var b,c=Object.keys;return c?b=c(a).length:(b=0,t(a,function(){b++})),b}function J(a){return Object.prototype.toString.call(a)}function K(a){return J(a)==="["+j+" Function]"}function L(a){return J(a)==="["+j+" Array]"}function M(a){m=a}function N(a){return[].slice.call(a,0)}function O(a,b,d){t(c,function(c){c&&B(c,l)&&c(a,b,d)})}function P(a,b,c,d,e){var f;f=h[b],e&&a.isModuleStarted(b)&&a.stop(b),B(f,g)?q.error(new Error,D(b)):ab(b,void 0,function(a){f.instances[c]=a,a.__instance_id__=c,O(a,d,e),B(d,g)?a.init():a.init(d)})}function Q(a,b){return t(b,function(c,d){a[d]=b[d]}),a}function R(a){var b;if(null==a||!B(a,j)||-1===a.constructor.toString().indexOf("Object()")||E(a)||F(a)||a.nodeType&&1===a.nodeType)return a;if(C(a,Date))return b=new Date,b.setTime(a.getTime()),b;if(C(a,Array))return b=N(a);if(C(a,Object))return b={},t(a,function(a,c){b[c]=R(a)}),b;throw new Error("Unable to copy object!")}function S(a,b,c,d){a[b]=function(a,b){return function(){var d=N(arguments);try{return b.apply(this,d)}catch(e){return q.error(c,a,e),k}}}(b,d)}function T(a,b){var c=[];return B(a,g)||t(a,function(a,d){d===b&&(c=a)}),c}function U(a,c){return n[a]===b&&(n[a]={}),n[a][c]===b&&(n[a][c]=[]),n[a][c]}function V(a,b){var c=0,d;if(!B(a,g))for(d=a.length-1;d>=0;d--)a[d].subscriber===b&&(c++,a.splice(d,1));return c}function W(a,b,c){var d,e,f,g=0;return t(a,function(a,h){d=h.split(":"),e=b,f=h,"global"===d[0]&&(e=d[0],f=d[1]),g+=V(n[e][f],c)}),g}function X(a,b,c){t(a,function(a,d){r.subscribeTo(b,d,a,c)})}function Y(a,b,c,d){a.handler.call(a.subscriber,b),m&&q.log(c,d,a)}function Z(a){return a}r={subscribers:function(a,b){return T(n[a],b)},unsubscribeFrom:function(a,b,c){var d=U(a,b),e,f=d.length-1;for(;f>=0;f--)e=d[f],e.subscriber===c&&d.splice(f,1)},subscribeTo:function(a,b,c,d){var e=U(a,b);e.push({subscriber:d,handler:c})},subscribe:function(a){var c=a.events;return a&&c!==b?(t(c,function(c,d){n[d]===b&&(n[d]={}),X(c,d,a)}),!0):k},unsubscribe:function(a){var c=0,d=a.events;return a&&d!==b?(t(d,function(d,e){n[e]===b&&(n[e]={}),c=W(d,e,a)}),c>0):k},publish:function(a,b,c){var d=N(this.subscribers(a,b)),e,f=d.length;if(0===f)return k;c=Z(c);while(e=d.shift())Y(e,c,a,b);return!0},preprocessPublishData:function(a){Z=function(b){return a(b,R)}},reset:function(){n={global:{}}}};function $(a,c){var d,f,g=[],i=0,j,k,l,m={mapping:[],dependencies:[]};c=(c!==b?c:h[a].dependencies||[]).concat();while(d=c.shift())B(d,"string")?(f=2===d.indexOf("_")?d.substr(0,3):0===d.indexOf("$")?d.substr(0,1):"",j=e[f]||e.gl_,d=d.replace(f,""),k=j.__map__[d],k=k?j.__resolveDI__(d):y(d),m.mapping.push(d)):(k=u(),k.resolve(d),m.mapping.push(h[a].dependencies[i])),g.push(k);return l=u(),ib.apply(ib,g).then(function(){l.resolve.apply(l,[m.mapping].concat(N(arguments)))}),l}function _(a,b,c){var d;function e(d){var e,f;e=h[a].creator.apply(h[a],[].slice.call(arguments,1)),e.__children__=[],e.dependencies=b,e.resolvedDependencies=d,e.__module_id__=a,f=e.init||G,e.__action__=e.__sandbox__=r,e.events=e.events||{},e.init=function(){var a=N(arguments).concat(i);return 0===e.__children__.length&&r.subscribe(e),f.apply(this,a)},e.handleAction=function(a){var b=this.events[a.type];B(b,g)||b.call(this,a)},e.onDestroy=e.onDestroy||e.destroy||function(){},e.destroy=function(){this.onDestroy(),r.unsubscribe(e),delete h[a].instances[e.__instance_id__]},c(e)}d=$(a,b),d.then(function(){e.apply(e,arguments)})}function ab(a,b,c){B(h[a],g)&&D(a,!0),_(a,b,function(b){m||t(b,function(c,d){K(c)&&S(b,d,a,b[d])}),c(b)})}function bb(a){t(a.instances,function(b){B(a,g)||B(b,g)||b.destroy()}),a.instances={}}q=a.console||{log:function(){},error:function(){}};function cb(a,b,c,d,e){var f,g,h,i,j,k;for(L(c)&&(f=N(c)),L(d)&&(g=N(d)),L(e)&&(h=N(e)),i=0,j=b.length;j>i;i++)k=b[i],c=f&&f[i]||H(),d=g&&g[i]||d,e=h&&h[i]||e,P(a,k,c,d,e)}function db(a,b){var c=a.instances[b];B(a,g)||B(c,g)||(c.destroy(),delete a.instances[b])}function eb(a,b){t(a.instances,function(a,c){s.stop(b,c)})}function fb(a){return B(h[a],g)?k:(delete h[a],!0)}function gb(a,b,c,d,e){B(c,"string")||(e=d,d=c,c=H()),P(a,b,c,d,e)}s={__super__:{},instances:{},type:"Module",getInstance:ab,register:function(a,b,c){return K(b)&&(c=b,b=[r,s,q,p]),h[a]=new jb(a,c),h[a].dependencies=b,h[a]},setInstance:function(a,b,c){var d=h[a];return d||D(a,!0),d.instances[b]=c,d},setVars:function(a){i=B(i,g)?a:Q(i,a)},resetVars:function(){i={}},getVars:function(){return Q({},i)},start:function(a,b,c,d){var e=L(a);e?cb(this,N(a),b,c,d):gb(this,a,b,c,d)},extend:function(a,b,c,d){var e=h[a],f,g;return g=u(),e?(ab(a,void 0,function(e){B(a,"string")&&B(b,"string")&&e.__children__.push(f),B(b,l)&&(d=b,b=a,c=[r,s,p.errorHandler(),p]),B(c,l)&&(d=c,c=[r,s,p.errorHandler(),p]),c.push(e),f=d.apply(d,c),h[b]=new jb(b,function(){var a={};return a=Q(a,e),a=Q(a,f),a.__children__=[],a=Q(a,{__super__:{__call__:function(b,c){return e[b].apply(a,c)}}})}),h[b].dependencies=c,g.resolve(h[b])}),g):(q.log(D(a)),g.resolve(null),g)},decorate:function(){return this.extend.apply(this,arguments)},isModuleStarted:function(a,b){var c=k;return c=B(b,g)?!B(h[a],g)&&I(h[a].instances)>0:!B(h[a],g)&&!B(h[a].instances[b],g)},startAll:function(){t(h,function(a,b){B(a,g)||s.start(b,H())})},stop:function(a,b){var c;return c=h[a],B(c,g)?k:(B(b,g)?bb(c):db(c,b),!0)},stopAll:function(){t(h,function(a,b){B(a,g)||eb(a,b)})},remove:function(a){var b=h[a];if(B(b,g))return null;if(!B(b,g))try{return s}finally{fb(a),v(e,"hm_",h)}return null},reset:function(){s.stopAll(),h={},v(e,"hm_",h)}};function hb(a){this.aPending=[],this.bCompleted=!1,this.sType="",this.oResult=null,a=a||G,this.resolve=x(this,"resolve"),this.reject=x(this,"reject"),a(this.resolve,this.reject)}hb.prototype={then:function(a,b){return this.bCompleted?"resolve"===this.sType?a.apply(a,this.oResult):b.apply(b,this.oResult):this.aPending.push({resolve:a,reject:b}),this},done:function(a){return this.then(a,G)},fail:function(a){return this.then(G,a)},all:function(){return ib.apply(ib,arguments)},"catch":function(a){return this.fail(a)}};function ib(){var a,b,c,d,e,f,g;if(a=N(arguments),c=a.length,d=u(),f={nLenPromisesResolved:0},g=[],0===a.length)d.resolve();else for(b=0;c>b;b++)e=a[b],e.then(w(b,"resolve",f,c,d,g),w(b,"reject",f,c,d,g));return d}p={version:"3.9.2",bus:r,errorHandler:function(){return q},setErrorHandler:function(a){q=a},Promise:a.Promise||hb,Deferred:a.Promise||hb,when:ib,module:s,setDebug:M,getDebug:function(){return m},extend:function(a,b){this[a]=B(this[a],g)?b:Q(this[a],b)},resolveDependencies:$,noConflict:function(a,b,c){return B(this[a],g)?k:(b[c]=this[a],!0)},addExtensionBeforeInit:function(a){c=Q(c,a)},getCopyModules:function(){return R(h)},getCopyChannels:function(){return R(n)},setNamespace:function(a){f=a},addMapping:function(a,c,d){var f=e[a];f===b?v(e,a,c,d):Q(e[a].__map__,c)},addAsyncMapping:function(a,b,c){this.addMapping(a,b,function(a){return c.call(b,a)})}},d={bus:r,module:s,log:q,api:p,global:a,doc:a.document||null},v(e,"$$_",d),v(e,"$",d),v(e,"pr_",i),v(e,"hm_",h),v(e,"ns_",f||a),v(e,"gl_",a);function jb(a,b){if(B(b,g))throw new Error("Something goes wrong!");this.creator=b,this.instances={},this.sModuleId=a}jb.prototype={start:function(a){return s.start(this.sModuleId,a),this},extend:function(a,b){return s.extend(this.sModuleId,a,b),this},stop:function(){return s.stop(this.sModuleId),this}},a.Hydra=p,o?module.exports=p:typeof define!==g&&define("hydra",[],function(){return p})}(this);
//# sourceMappingURL=hydra.min.map